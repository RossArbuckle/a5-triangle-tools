plugins {
    id 'java'
    id 'application'
    id 'jacoco'
}

sourceCompatibility = 17

repositories { mavenCentral() }

dependencies {
    implementation project(':Triangle.AbstractMachine')
    testImplementation group: 'junit', name: 'junit', version: '4.13.2'
    implementation 'commons-cli:commons-cli:1.4'
}

application {
    mainClass = 'Triangle.Compiler'
}

// Allow access to programs for unit tests
sourceSets.test.resources.srcDir file("$rootDir/programs")

jacoco { 
toolVersion = "0.8.7" 
} 

test {
finalizedBy jacocoTestReport // report is always generated after tests run
}


jacocoTestReport {
dependsOn test // tests are required to run before generating the report
}
